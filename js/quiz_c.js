// VARIABLES ----------------------------------------------------------// Object constructor function questionRecord(question, answer, numAnswerChoices, answerChoice) {    this.question = question; // index 0   this.answer = answer; // index 1   this.numAnswerChoices = numAnswerChoices; // index 2   this.answerChoice = answerChoice;//new makeArray(numAnswerChoices);//answerChoice; // index 3} var numQuestions;var quizTitle;var quizDirections;var questionArray;var quizType;var quizID; // ----------------------------------------------------------function makeArray(length) { 	this.length = length 	for (var i = 1; i <= length; i++) { 		this[i] = null 	} 	return this }// ----------------------------------------------------------function init() {	// INITIALIZE SIZES OF questionArray, map	questionArray = new makeArray(numQuestions);	map = new makeArray(numQuestions);}// ----------------------------------------------------------function showQuiz(qtype) {	if (qtype == 'PullDown')		showPullDownQuiz();	else if (qtype == 'FillInNoBank')		showFillInNoBankQuiz();	else if (qtype == 'FillInYesBank')		showFillInYesBankQuiz();	else if (qtype == 'MultipleChoice')	{		showMultipleChoiceQuiz();	}	document.close();}// ----------------------------------------------------------function showPullDownQuiz() {	makeMap();	showTitleDirections();	document.writeln('<FORM NAME="f">');	document.writeln('<TABLE align=center>');	// PRINT EACH QUESTION	for (q=0; q<questionArray.length; ++q)	{		//document.writeln('<BR>');		document.writeln('<TR>');		document.writeln('	<TD>');		document.writeln('		<INPUT TYPE="CHECKBOX" NAME="check">');		document.writeln('		' + (q+1) + '.) ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		'+ questionArray[q].question + '  ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		<SELECT NAME="selectedAnswer" SIZE=1>');		document.writeln('		<OPTION SELECTED VALUE="0">-- Choose an answer --');		// PRINT EACH ANSWER CHOICE		for (c=0; c<questionArray[q].numAnswerChoices; ++c){			document.writeln('		<OPTION VALUE="'+ questionArray[q].answerChoice[map[q][c]] +'">' + questionArray[q].answerChoice[map[q][c]] + '');		}		document.writeln('		</SELECT>');		document.writeln('		</TD>');		document.writeln('</TR>');	}	document.writeln('</TABLE>');	document.writeln('</FORM>');	showScore();	submitScore(); }// ----------------------------------------------------------function showFillInNoBankQuiz() {	makeMap();	showTitleDirections();	document.writeln('<FORM NAME="f">');	document.writeln('<TABLE align=center>');	// PRINT EACH QUESTION	for (q=0; q<questionArray.length; ++q)	{		//document.writeln('<BR>');		document.writeln('<TR>');		document.writeln('	<TD>');		document.writeln('		<INPUT TYPE="CHECKBOX" NAME="check" HIDE=1>');		document.writeln('		' + (q+1) + '.) ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		'+ questionArray[q].question + '  ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		<INPUT TYPE="TEXT" NAME="selectedAnswer" VALUE="">');		document.writeln('		</TD>');		document.writeln('</TR>');	}	document.writeln('</TABLE>');	document.writeln('</FORM>');	showScore();	submitScore(); }// ----------------------------------------------------------function showFillInYesBankQuiz() {	makeMap();	showTitleDirections();	document.writeln('<FORM NAME="f">');	document.writeln('<TABLE align=center>');	// PRINT EACH QUESTION	for (q=0; q<questionArray.length; ++q)	{		//document.writeln('<BR>');		document.writeln('<TR>');		document.writeln('	<TD>');		document.writeln('		<INPUT TYPE="CHECKBOX" NAME="check" HIDE=1>');		document.writeln('		' + (q+1) + '.) ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		'+ questionArray[q].question + '  ');		document.writeln('		</TD>');		document.writeln('	<TD>');		document.writeln('		<INPUT TYPE="TEXT" NAME="selectedAnswer" VALUE="">');		document.writeln('		</TD>');		document.writeln('</TR>');	}	// SHOW WORD BANK	document.writeln('<TR ALIGN=CENTER>');	document.writeln('	<TD colspan=3><BR>');	document.writeln('<B>Word Bank:</B>');	document.writeln('	</TD>');	document.writeln('</TR>');	bankmap = newMap(questionArray.length);	for(q=0; q<questionArray.length; ++q)	{		document.writeln('<TR ALIGN=CENTER>');		document.writeln('	<TD colspan=3>');		document.writeln(questionArray[bankmap[q]].answer);		document.writeln('	</TD>');	document.writeln('</TR>');	}	document.writeln('</TABLE>');	document.writeln('</FORM>');	showScore();	submitScore(); }// ----------------------------------------------------------function showMultipleChoiceQuiz() {	makeMap();	showTitleDirections();	document.writeln('<TABLE align=center border=1 cellpadding=1 cellspacing=1>');	// PRINT EACH QUESTION	for (q=0; q<questionArray.length; ++q)	{		document.writeln('<FORM NAME="f">');//'<FORM NAME="f'+q+'">');		document.writeln('<TR>');		document.writeln('	<TD VALIGN=texttop>');		document.writeln('		<INPUT TYPE="CHECKBOX" NAME="check">');		document.writeln('		' + (q+1) + '.) ');		document.writeln('		</TD>');		document.writeln('	<TD VALIGN=texttop>');		document.writeln('		'+ questionArray[q].question + '  ');		document.writeln('		</TD>');		document.writeln('	<TD VALIGN=texttop WIDTH=300>');		// PRINT EACH ANSWER CHOICE		var numAC = 0;		for (c=0; c<questionArray[q].numAnswerChoices; ++c){			if(questionArray[q].answerChoice[map[q][c]] != "")			{				document.writeln('		<INPUT TYPE="RADIO" NAME="selectedAnswer" VALUE="' + 					questionArray[q].answerChoice[map[q][c]] +'">' + questionArray[q].answerChoice[map[q][c]]);				document.writeln('<BR>');				numAC++;			}		}		questionArray[q].numAnswerChoices = numAC;		document.writeln('		</TD>');		document.writeln('</TR>');		document.writeln('</FORM>');	}	document.writeln('</TABLE>');	showScore();	submitScore(); }// ----------------------------------------------------------function gradeQuiz(qtype) {	var studentAnswerA = new Array (); // array of stored student answers	var i = 0; // number of correct answers	var complete = true;	//----------------------------------------	if(qtype == 'PullDown')	{		// STORE STUDENT'S ANSWERS FOR EACH QUESTION		for (n=0; n<questionArray.length; ++n)		{			var answerChoiceNdx = document.f.selectedAnswer[n].selectedIndex - 1;			if (answerChoiceNdx != -1) // QUESTION WAS ANSWERED			{				studentAnswerA[n] = questionArray[n].answerChoice[map[n][answerChoiceNdx]];			}			else // QUESTION WAS NOT ANSWERED			{				//alert("Question #"+ (n+1) +" was not answered");				complete = false;			}		}	}	//----------------------------------------	else if(qtype == 'FillInNoBank' || qtype == 'FillInYesBank')	{		// STORE STUDENT'S ANSWERS FOR EACH QUESTION		for (n=0; n<questionArray.length; ++n)		{			if (document.f.selectedAnswer[n].value != "")			{				studentAnswerA[n] = document.f.selectedAnswer[n].value;			}			else			{				//alert("Question #"+ (n+1) +" was not answered");				complete = false;			}		}	}	//----------------------------------------	else if(qtype == 'MultipleChoice')	{		// STORE STUDENT'S ANSWERS FOR EACH QUESTION		for (n=0; n<questionArray.length; ++n)		{			var oneChecked = false;			var numAC = 0;			for (c=0; c<questionArray[n].numAnswerChoices; ++c)			{				if (document.f[n].selectedAnswer[c].checked) // QUESTION WAS ANSWERED				{					studentAnswerA[n] = document.f[n].selectedAnswer[c].value;					numAC++;					oneChecked = true;					break;				}			}			if(!oneChecked) // QUESTION WAS NOT ANSWERED			{				//alert("Question #"+ (n+1) +" was not answered");				complete = false;			}		}		// ADD UP NUMBER OF CORRECT ANSWERS		for (n=0; n<questionArray.length; ++n)		{			if (studentAnswerA[n]==questionArray[n].answer)			{				i++;				document.f[n].check.checked = false;			}			else			{				document.f[n].check.checked = true;			}		}		// CALCULATE SCORE		if(!complete){			alert("Some questions were not answered");		}		document.total.score.value = i;		document.total.outof.value = questionArray.length;		var per =  Math.round((i / questionArray.length) * 100);		document.total.percent.value = per;		document.submitScore.score.value=per;		document.submitScore.q_id.value=quizID;		 	}	//----------------------------------------	if (qtype!='MultipleChoice')	{		// ADD UP NUMBER OF CORRECT ANSWERS		for (n=0; n<questionArray.length; ++n)		{			if (studentAnswerA[n]==questionArray[n].answer)			{				i++;				document.f.check[n].checked = false;			}			else			{				document.f.check[n].checked = true;			}		}		// CALCULATE SCORE		if(!complete){			alert("Some questions were not answered");		}		document.total.score.value = i;		document.total.outof.value = questionArray.length;		var per =  Math.round((i / questionArray.length) * 100);		document.total.percent.value = per; 		document.submitScore.score.value=per; 		document.submitScore.q_id.value=quizID;			}	document.close();}// ----------------------------------------------------------function makeMap() {	// INITIALIZE MAP	for(q=0; q<questionArray.length; ++q)	{		map[q] = new makeArray (questionArray[q].numAnswerChoices);		for(c=0; c<questionArray[q].numAnswerChoices; ++c)		{			map[q][c] = c;		}	}	// SHUFFLE MAP	for (z = 0; z < 5; z++) { // SHUFFLE 5 TIMES, GOOD ENOUGH		for(q=0; q<questionArray.length; ++q) // FOR EACH QUESTION		{			for (x = 0; x < questionArray[q].numAnswerChoices; x++) { // ONE PASS THROUGH ANSWERCHOICE ARRAY				randomI = Math.floor(Math.random()*questionArray[q].numAnswerChoices);				randomVal = map[q][randomI];				savedVal = map[q][x];				map[q][x] = randomVal;				map[q][randomI] = savedVal;			}		}	}}// ----------------------------------------------------------function showScore() {	document.writeln('<CENTER><div id="score_show">');	document.writeln('<FORM name="total" method="get" action="<? $php_myself ?>?mode=insert">');	document.writeln('<INPUT TYPE="BUTTON" VALUE="Check Answers" onClick="gradeQuiz(quizType)">');	document.writeln('<INPUT TYPE="button" VALUE="Reload Quiz" onClick=\'parent.location="javascript:location.reload()"\'>');	document.writeln('<BR><HR>');	document.writeln('	You got');	document.writeln('		<INPUT TYPE="TEXT" NAME="score" VALUE="" SIZE=2> /');	document.writeln('		<INPUT TYPE="TEXT" NAME="outof" VALUE="" SIZE=2> correct');	document.writeln('		<BR>');	document.writeln('	Your Score: ');	document.writeln('		<INPUT TYPE="TEXT" NAME="percent" VALUE="" SIZE=4> %');	document.writeln('		<BR><BR>');	document.writeln('	You may correct the checked questions to try to improve your score.');	document.writeln('</FORM>');	document.writeln('</div></CENTER>');		document.close();}function submitScore(){	document.writeln('<center><span style="cursor:pointer; color: #AE0004;" onclick=document.getElementById("div_03").style.display="block";>Submit Scores</span>');	document.writeln('<div style="display:none;" id="div_03"><br />'); 	document.writeln('<form id="submitScore" name="submitScore" method="get" action="../../include/quiz_submit.php">'); 	document.writeln('<table width="377" border="0" cellpadding="5" cellspacing="1">'); 	document.writeln('<tr><td colspan="3" bgcolor="#E3E3E3">Use Roomaji/English.&nbsp;&nbsp;NO Kana/kanji</td></tr>');	document.writeln('<tr>'); 	document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">User Name</div></td>'); 	document.writeln('<td width="12" bgcolor="#E3E3E3">&nbsp;</td>'); 	document.writeln('<td width="213" bgcolor="#E3E3E3"><input type="text" name="user" /><br>ex. nihongo</td>'); 	document.writeln('</tr><tr>'); 	document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">Password</div></td>'); 	document.writeln('<td width="12" bgcolor="#E3E3E3">&nbsp;</td>'); 	document.writeln('<td width="213" bgcolor="#E3E3E3"><input type="text" name="pass" /><br>ex. daisuki</td>'); 	document.writeln('</tr><tr>'); 	document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">color-number</div></td>'); 	document.writeln('<td width="12" bgcolor="#E3E3E3">&nbsp;</td>'); 	document.writeln('<td width="213" bgcolor="#E3E3E3"><input type="text" name="f_name" /><br>ex. kiiro-17</td>'); 	document.writeln('</tr><tr>'); 	document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">pseudonym</div></td>'); 	document.writeln('<td width="12" bgcolor="#E3E3E3">&nbsp;</td>'); 	document.writeln('<td width="213" bgcolor="#E3E3E3"><input type="text" name="l_name" /><br>given in class</td>'); 	document.writeln('</tr><tr>'); 		document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">Class</div></td>'); 	document.writeln('<td width="213" bgcolor="#E3E3E3">&nbsp;</td>'); 		document.writeln('<td width="25" bgcolor="#E3E3E3"><input type="radio" value="506" name="class" />601D &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="507" name="class" />610D<br>');	document.writeln('<input type="radio" value="412K" name="class" />611D &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="412L" name="class" />317C<br>');	document.writeln('<input type="radio" value="320k" name="class" />320K &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="320l" name="class" />320L<br>');	document.writeln('<input type="radio" value="325k" name="class" />325KL &nbsp;');	document.writeln('<input type="radio" value="325l" name="class" />326/327<br>');			document.writeln('</tr><tr>');	document.writeln('<td width="136" bgcolor="#E3E3E3"><div align="right">Section</div></td>'); 	document.writeln('<td width="12" bgcolor="#E3E3E3">&nbsp;</td>'); 	document.writeln('<td width="25" bgcolor="#E3E3E3"><input type="radio" value="1" name="section" />1 &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="6" name="section" />6<br>');	document.writeln('<input type="radio" value="2" name="section" />2 &nbsp; &nbsp;');	document.writeln('<input type="radio" value="7" name="section" />7<br>');	document.writeln('<input type="radio" value="3" name="section" />3 &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="8" name="section" />8<br>');	document.writeln('<input type="radio" value="4" name="section" />4 &nbsp;&nbsp;&nbsp;');	document.writeln('<input type="radio" value="9" name="section" />9<br>');	document.writeln('<input type="radio" value="5" name="section" />5</td>');	document.writeln('</tr><tr>'); 	document.writeln('<td bgcolor="#E3E3E3"></td>'); 	document.writeln('<td bgcolor="#E3E3E3"></td>'); 	document.writeln('<td bgcolor="#E3E3E3" colspan="3"><input type="submit" name="Submit" value="Submit" />'); 	document.writeln('<input type="hidden" name="mode" value="insert"/>'); 	document.writeln('<input type="hidden" name="score" value=""/></td>'); 	document.writeln('<input type="hidden" name="q_id" value=""'); 	document.writeln('</tr>'); 	document.writeln('</table>'); 	document.writeln('</form>'); 	document.writeln('</div>'); 	document.writeln('</center>');  	document.writeln('<HR><BR><BR>');}// ----------------------------------------------------------function show_hide(obj){       if (obj.style.display == "none")       {obj.style.display = "block"}       else       {obj.style.display ="none"}       } //nothing();function nothing(){	//alert('done');	return true;}function showTitleDirections () {	document.writeln('<CENTER>');	document.writeln(	'<FONT STYLE="FONT-SIZE:20px"><B>');	document.writeln(quizTitle);	document.writeln(	'</B></FONT>');	document.writeln(	'<BR><FONT STYLE="FONT-SIZE:15px">');	document.writeln(quizDirections);	document.writeln(	'</FONT>');	document.writeln('</CENTER>');}function newMap(mapSize) {	// INITIALIZE MAP	newmap = new makeArray(mapSize);	for(var s=0; s<mapSize; ++s)		newmap[s] = s;	shuffleNewMap(newmap, mapSize);	return newmap;}function shuffleNewMap(newmap, mapSize) {	// SHUFFLE MAP	for (var z = 0; z < 2; z++) { // SHUFFLE 5 TIMES, GOOD ENOUGH		for (var x = 0; x < mapSize; x++) { // ONE PASS THROUGH ANSWERCHOICE ARRAY			randomI = Math.floor(Math.random()*mapSize);			randomVal = newmap[randomI];			savedVal = newmap[x];			newmap[x] = randomVal;			newmap[randomI] = savedVal;		}	}}